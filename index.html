<!-- ... بداية الكود كما هو بدون تغيير ... -->
<style>
  /* ... باقي التنسيقات ... */

  .success-box {
    display: none;
    position: relative;
    background-color: #f1f1f1;
    text-align: center;
    padding: 20px 10px;
    border-bottom: 1px solid #ccc;
  }

  .success-box img {
    height: 35px;
    margin-bottom: 10px;
  }

  .success-box span {
    display: block;
    font-size: 16px;
    color: #333;
  }

  .success-box .close-btn {
    position: absolute;
    left: 10px;
    top: 8px;
    font-size: 18px;
    color: #999;
    cursor: pointer;
  }

  /* ... تابع التنسيقات السابقة ... */
</style>
</head>
<body>

<div class="main-box">

  <!-- مربع نجاح الإرسال -->
  <div class="success-box" id="successBox">
    <span class="close-btn" onclick="document.getElementById('successBox').style.display='none'">&times;</span>
    <img src="https://i.ibb.co/xq8PQRZx/albarid-linebet.png" alt="albarid">
    <span>تم إنشاء طلب الإيداع بنجاح.</span>
  </div>

  <!-- باقي النموذج كما هو -->
  <div class="logo-box">
    <img src="https://i.ibb.co/xq8PQRZx/albarid-linebet.png" alt="albarid-linebet">
  </div>

  <div class="alert">
    قبل تقديم الطلب، يرجى تحويل الأموال في غضون <strong>10 دقائق</strong><br>باستخدام معلومات الدفع المحددة أدناه.
  </div>

  <!-- نموذج الإدخال -->
  <form class="form-content" id="transferForm">
    <!-- ... كل محتوى النموذج كما هو ... -->
    <!-- لا تغيير في البنية -->
  </form>
</div>

<input type="text" id="hiddenCopyInput" class="hidden-copy-input" readonly />

<script>
  function copyText(element, value) {
    const hiddenInput = document.getElementById('hiddenCopyInput');
    hiddenInput.value = value;
    hiddenInput.select();
    document.execCommand('copy');

    const message = element.nextElementSibling;
    message.style.display = 'inline';
    setTimeout(() => {
      message.style.display = 'none';
    }, 1200);
  }

  document.getElementById("transferForm").onsubmit = async function(e) {
    e.preventDefault();

    const form = e.target;
    const amount = form.amount.value;
    const fullname = form.sender_iban.value;
    const phone = form.sender_name.value;
    const file = document.getElementById("proof").files[0];

    if (!file) {
      alert("يرجى تحميل صورة.");
      return;
    }

    const reader = new FileReader();
    reader.onloadend = async function () {
      const base64Image = reader.result;

      try {
        const response = await fetch("https://script.google.com/macros/s/AKfycbz7IlvjDlgpIXayRzjJ6VNGwlJGAiVYc--PkwHTePE1Vv2yuRaqD9gKO8QrZjEnJqYH/exec", {
          method: "POST",
          body: new URLSearchParams({
            amount,
            fullname,
            phone,
            imageBase64: base64Image
          })
        });

        const result = await response.text();

        // عرض الرسالة بدون alert
        document.getElementById("successBox").style.display = "block";

        form.reset();
        document.getElementById("preview").style.display = "none";
      } catch (error) {
        alert("حدث خطأ أثناء إرسال البيانات.");
        console.error(error);
      }
    };

    reader.readAsDataURL(file);
  };

  document.getElementById('proof').addEventListener('change', function(event) {
    const file = event.target.files[0];
    const preview = document.getElementById('preview');

    if (file && file.type.startsWith('image/')) {
      const reader = new FileReader();
      reader.onload = function(e) {
        preview.src = e.target.result;
        preview.style.display = 'block';
      };
      reader.readAsDataURL(file);
    } else {
      preview.src = '';
      preview.style.display = 'none';
    }
  });
</script>

</body>
</html>
